<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.118.2">
    <meta name="generator" content="Relearn 5.20.0">
    <meta name="description" content="站在巨人的肩膀上">
    <meta name="author" content="月明之都">
    <title>主页 :: 巨人之海</title>
    <link href="https://irscript.github.io/index.html" rel="canonical" type="text/html" title="主页 :: 巨人之海">
    <link href="./index.xml" rel="alternate" type="application/rss+xml" title="主页 :: 巨人之海"><link rel="icon" href="./images/favicon.png" type="image/png">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="./css/fontawesome-all.min.css?1694943322" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="./css/fontawesome-all.min.css?1694943322" rel="stylesheet"></noscript>
    <link href="./css/nucleus.css?1694943322" rel="stylesheet">
    <link href="./css/auto-complete.css?1694943322" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="./css/auto-complete.css?1694943322" rel="stylesheet"></noscript>
    <link href="./css/perfect-scrollbar.min.css?1694943322" rel="stylesheet">
    <link href="./css/fonts.css?1694943322" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="./css/fonts.css?1694943322" rel="stylesheet"></noscript>
    <link href="./css/theme.css?1694943322" rel="stylesheet">
    <link href="./css/theme-auto.css?1694943322" rel="stylesheet" id="variant-style">
    <link href="./css/variant.css?1694943322" rel="stylesheet">
    <link href="./css/print.css?1694943322" rel="stylesheet" media="print">
    <link href="./css/format-print.css?1694943322" rel="stylesheet">
    <link href="./css/ie.css?1694943322" rel="stylesheet">
    <script src="./js/url.js?1694943322"></script>
    <script src="./js/variant.js?1694943322"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="./index.search.js";
      var root_url="./";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = '复制到剪贴板';
      window.T_Copied_to_clipboard = '复制到剪贴板！';
      window.T_Copy_link_to_clipboard = '将链接复制到剪贴板';
      window.T_Link_copied_to_clipboard = '链接复制到剪贴板！';
      window.T_No_results_found = '找不到\u0022{0}\u0022的结果';
      window.T_N_results_found = '为\u0022{0}\u0022找到 {1} 个结果';
      // some further base stuff
      var baseUriFull='https:\/\/irscript.github.io/';
      window.variants && variants.init( [ 'auto', 'relearn-bright', 'relearn-light', 'relearn-dark', 'zen-light', 'zen-dark', 'neon', 'learn', 'blue', 'green', 'red' ] );
    </script>
  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="./index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='导航 (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">主页</span><meta itemprop="position" content="1"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable home" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="home">
            <header class="headline">
            </header>
<h1 id="主页">主页</h1>

<h2 id="目标">目标</h2>
<hr>
<p>用于存储、展示、收集计算机技术相关的资料，同时用于展示个人项目或相关技术记录。</p>
<h2 id="归档">归档</h2>
<hr>
<p>存在以下分类：

<ul class="children children-li children-sort-weight">
	
<li><a href="./algorithms/index.html">算法</a></li>
<li><a href="./struct/index.html">数据结构</a></li>
<li><a href="./compiler/index.html">编译器设计与实现</a></li>
<li><a href="./os/index.html">操作系统</a></li>
<li><a href="./format/index.html">文件格式</a></li>
</ul></p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">主页 的子部分</h1>
          <article class="default">
            <header class="headline">
            </header>
<h1 id="算法">算法</h1>


<ul class="children children-li children-sort-weight">
	
<li><a href="./algorithms/align/index.html">整数对齐</a></li>
</ul>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">算法 的子部分</h1>
          <article class="default">
            <header class="headline">
<div class="tags">
  <a class="tag-link" href="./tags/align/index.html">Align</a>
  <a class="tag-link" href="./tags/cxx/index.html">Cxx</a>
</div>
            </header>
<h1 id="整数对齐">整数对齐</h1>

<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// 向上大小对齐
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="k">constexpr</span> <span class="n">T</span> <span class="n">alignup</span><span class="p">(</span><span class="n">T</span> <span class="n">num</span><span class="p">,</span> <span class="n">T</span> <span class="n">base</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="n">num</span> <span class="o">+</span> <span class="n">base</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="p">(</span><span class="n">base</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 向下大小对齐
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="k">constexpr</span> <span class="n">T</span> <span class="n">aligndown</span><span class="p">(</span><span class="n">T</span> <span class="n">num</span><span class="p">,</span> <span class="n">T</span> <span class="n">base</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="n">num</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">base</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span> <span class="p">}</span></span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

          </section>
          <article class="default">
            <header class="headline">
            </header>
<h1 id="数据结构">数据结构</h1>

<h3 id="目录">目录</h3>
<ul>
<li><strong><a href="./struct/list/">链表</a></strong>
<ul>
<li><em><a href="./struct/list/singlelinkedlist/">单向节点链表</a></em></li>
<li><em><a href="./struct/list/doublelinkedlist/">双向节点链表</a></em></li>
</ul>
</li>
<li>待续</li>
</ul>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">数据结构 的子部分</h1>
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第1章</div>
<h1 id="链表">链表</h1>


<ul class="children children-li children-sort-weight">
	
<li><a href="./struct/list/singlelinkedlist/index.html">单向节点链表</a></li>
<li><a href="./struct/list/doublelinkedlist/index.html">双向节点链表</a></li>
</ul>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">链表 的子部分</h1>
          <article class="default">
            <header class="headline">
            </header>
<h1 id="单向节点链表">单向节点链表</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class="tags">
  <a class="tag-link" href="./tags/cxx/index.html">Cxx</a>
  <a class="tag-link" href="./tags/list/index.html">List</a>
</div>
            </header>
<h1 id="双向节点链表">双向节点链表</h1>

<h2 id="节点模板类定义">节点模板类定义</h2>
<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl">    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Node</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">IListNode</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Node</span> <span class="o">*</span><span class="n">mNext</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">Node</span> <span class="o">*</span><span class="n">mPrev</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="kr">inline</span> <span class="n">IListNode</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="o">:</span> <span class="n">mNext</span><span class="p">(</span><span class="k">nullptr</span><span class="p">),</span> <span class="n">mPrev</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 初始化节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span> <span class="n">mNext</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">,</span> <span class="n">mPrev</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 获取后继节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">getNext</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">mNext</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 获取前驱节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">getPrev</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">mPrev</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 设置后继节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">setNext</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">next</span><span class="p">)</span> <span class="p">{</span> <span class="n">mNext</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 设置前驱节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">setPrev</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">prev</span><span class="p">)</span> <span class="p">{</span> <span class="n">mPrev</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 设置节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">setNode</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">next</span><span class="p">,</span> <span class="n">Node</span> <span class="o">*</span><span class="n">prev</span><span class="p">)</span> <span class="p">{</span> <span class="n">mNext</span> <span class="o">=</span> <span class="n">next</span><span class="p">,</span> <span class="n">mPrev</span> <span class="o">=</span> <span class="n">prev</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span></span></span></code></pre></div><h2 id="链表模板类定义">链表模板类定义</h2>
<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl">    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Node</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">IList</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">IListNode</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;</span> <span class="n">mRoot</span><span class="p">;</span> <span class="c1">// 链表根节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">uint</span> <span class="n">mCount</span><span class="p">;</span>           <span class="c1">// 节点计数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 链表初始化
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">IList</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="o">:</span> <span class="n">mCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">mRoot</span><span class="p">.</span><span class="n">setNode</span><span class="p">((</span><span class="n">Node</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mRoot</span><span class="p">,</span> <span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mRoot</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 初始链表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">initList</span><span class="p">()</span> <span class="p">{</span> <span class="n">mCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">mRoot</span><span class="p">.</span><span class="n">setNode</span><span class="p">((</span><span class="n">Node</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mRoot</span><span class="p">,</span> <span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mRoot</span><span class="p">);</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 获取根，只读
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">getRoot</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mRoot</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 获取节点计数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">uint</span> <span class="nf">getCount</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">mCount</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 获取第一个节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">getEntry</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Node</span> <span class="o">*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">mRoot</span><span class="p">.</span><span class="n">getNext</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">           <span class="cm">/* if (ret == &amp;mRoot)
</span></span></span><span class="line"><span class="cl"><span class="cm">                ret = nullptr;*/</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">front</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">getEntry</span><span class="p">();</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 获取最后一个节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">getTail</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Node</span> <span class="o">*</span><span class="n">ret</span> <span class="o">=</span> <span class="n">mRoot</span><span class="p">.</span><span class="n">getPrev</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">             <span class="cm">/* if (ret == &amp;mRoot)
</span></span></span><span class="line"><span class="cl"><span class="cm">                ret = nullptr;*/</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">back</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">getTail</span><span class="p">();</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 从头部插入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">insertEntry</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Node</span> <span class="o">*</span><span class="n">head</span> <span class="o">=</span> <span class="n">mRoot</span><span class="p">.</span><span class="n">getNext</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">node</span><span class="o">-&gt;</span><span class="n">setPrev</span><span class="p">((</span><span class="n">Node</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mRoot</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">node</span><span class="o">-&gt;</span><span class="n">setNext</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">head</span><span class="o">-&gt;</span><span class="n">setPrev</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">mRoot</span><span class="p">.</span><span class="n">setNext</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">++</span><span class="n">mCount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 从尾部插入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">insertTail</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Node</span> <span class="o">*</span><span class="n">tail</span> <span class="o">=</span> <span class="n">mRoot</span><span class="p">.</span><span class="n">getPrev</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">node</span><span class="o">-&gt;</span><span class="n">setPrev</span><span class="p">(</span><span class="n">tail</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">node</span><span class="o">-&gt;</span><span class="n">setNext</span><span class="p">((</span><span class="n">Node</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mRoot</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">tail</span><span class="o">-&gt;</span><span class="n">setNext</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">mRoot</span><span class="p">.</span><span class="n">setPrev</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">++</span><span class="n">mCount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 从iter前面插入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="kt">void</span> <span class="nf">insert</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">iter</span><span class="p">,</span> <span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">iter</span><span class="o">-&gt;</span><span class="n">getPrev</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">setNext</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">node</span><span class="o">-&gt;</span><span class="n">setPrev</span><span class="p">(</span><span class="n">iter</span><span class="o">-&gt;</span><span class="n">getPrev</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">node</span><span class="o">-&gt;</span><span class="n">setNext</span><span class="p">(</span><span class="n">iter</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">iter</span><span class="o">-&gt;</span><span class="n">setPrev</span><span class="p">(</span><span class="n">node</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">++</span><span class="n">mCount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 移除节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">remove</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">entry</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 根节点并不能移除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">((</span><span class="n">Node</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mRoot</span> <span class="o">==</span> <span class="n">entry</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">Node</span> <span class="o">*</span><span class="n">prev</span> <span class="o">=</span> <span class="n">entry</span><span class="o">-&gt;</span><span class="n">getPrev</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">Node</span> <span class="o">*</span><span class="n">next</span> <span class="o">=</span> <span class="n">entry</span><span class="o">-&gt;</span><span class="n">getNext</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">prev</span><span class="o">-&gt;</span><span class="n">setNext</span><span class="p">(</span><span class="n">next</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">next</span><span class="o">-&gt;</span><span class="n">setPrev</span><span class="p">(</span><span class="n">prev</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">entry</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="o">--</span><span class="n">mCount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">entry</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 移除头部节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">removeEntry</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">remove</span><span class="p">(</span><span class="n">mRoot</span><span class="p">.</span><span class="n">getNext</span><span class="p">());</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 移除尾部节点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kr">inline</span> <span class="n">Node</span> <span class="o">*</span><span class="nf">removeTail</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">remove</span><span class="p">(</span><span class="n">mRoot</span><span class="p">.</span><span class="n">getPrev</span><span class="p">());</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span></span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

          </section>
          </section>
          <article class="default">
            <header class="headline">
            </header>
<h1 id="编译器设计与实现">编译器设计与实现</h1>

<h2 id="目录">目录</h2>
<hr>

<ul class="children children-li children-sort-weight">
	
<li><a href="./compiler/1_lexer/index.html">词法分析</a></li>
<li><a href="./compiler/2_parser/index.html">语法分析</a></li>
<li><a href="./compiler/3_analysis/index.html">语义分析</a></li>
<li><a href="./compiler/4_optimize/index.html">中间优化</a></li>
<li><a href="./compiler/5_target/index.html">目标生成</a></li>
<li><a href="./compiler/6_ir/index.html">中间代码</a></li>
<li><a href="./compiler/7_instruction/index.html">指令集</a></li>
<li><a href="./compiler/8_langdef/index.html">语言定义</a></li>
</ul>
<h2 id="引言">引言</h2>
<hr>
编译原理是将文本字符流，通过一系列的分析、转换，最后生成确定的指令文件的数据分析转换技术。
<p>编译器是利用编译原理，将一种程序（源程序）翻译成另一种程序（目标程序）的计算机程序。业界也将编译器分为三个部分：前端、中端、后端。</p>
<p>编译器所做的工作流程如下图所示。</p>
<p><a href="#image-47b7559612b9d6692bd84f065ddc17bb" class="lightbox-link"><img src="./compiler/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86.svg" alt="编译总流程" class="figure-image bg-white border lightbox noshadow" style="height: auto; width: auto;" loading="lazy"></a>
<a href="javascript:history.back();" class="lightbox-back" id="image-47b7559612b9d6692bd84f065ddc17bb"><img src="./compiler/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86.svg" alt="编译总流程" class="lightbox-image" loading="lazy"></a></p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">编译器设计与实现 的子部分</h1>
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第1章</div>
<h1 id="词法分析">词法分析</h1>

<h2 id="1-序">1 序</h2>
<p>词法分析就是将代码字符流，按照一定的规则进行分析，获取符合词法规则的字符串，并进行信息标注，为语法分析提供单词(Token)流。</p>
<h2 id="2-词法规则">2 词法规则</h2>
<hr>
<p>词法分析按照规定的规则，可以从字符流中获取数据。</p>
<p>规则定义为以下几类：</p>
<ul>
<li>标识符：由字母、数字、下划线( _ )构成，但是不得由数字为起始；其中存在特殊的字符串为关键字。</li>
<li>普通数字字面量：由数字和&rsquo;.&lsquo;组成，其中分为整数、浮点数；</li>
<li>2进制数字字面量：由 &lsquo;0B&rsquo;起始，多个 &lsquo;0&rsquo;或'1&rsquo;构成。</li>
<li>16进制数字字面量：由 &lsquo;0X&rsquo;起始，多个 十六进制字符 构成。</li>
<li>字符字面量：由 &lsquo;&lsquo;&lsquo;起始和结尾，中间为可打印的字符。</li>
</ul>
<h2 id="3-token-分类">3 Token 分类</h2>
<hr>
<h2 id="4-关键字">4 关键字</h2>
<hr>
<h2 id="5-解析标识符">5 解析标识符</h2>
<hr>
<h2 id="6-解析数字">6 解析数字</h2>
<hr>

            <footer class="footline">

            </footer>
          </article>

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第2章</div>
<h1 id="语法分析">语法分析</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第3章</div>
<h1 id="语义分析">语义分析</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第4章</div>
<h1 id="中间优化">中间优化</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第5章</div>
<h1 id="目标生成">目标生成</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第6章</div>
<h1 id="中间代码">中间代码</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第7章</div>
<h1 id="指令集">指令集</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第8章</div>
<h1 id="语言定义">语言定义</h1>

<p>air语言是C语法系的编程语言，提供面向对象、函数式、模板等高级语言功能。</p>
<h2 id="目录">目录</h2>
<hr>

<ul class="children children-li children-sort-weight">
	
<li><a href="./compiler/8_langdef/1_codefile/index.html">代码文件结构</a></li>
<li><a href="./compiler/8_langdef/2_keyword/index.html">关键字</a></li>
<li><a href="./compiler/8_langdef/3_operator/index.html">操作符</a></li>
<li><a href="./compiler/8_langdef/4_typesystem/index.html">类型系统</a></li>
</ul>
<h2 id="语法定义">语法定义</h2>
<hr>
<div class="wrap-code highlight"><pre tabindex="0"><code>文件单元
FileUnit = PkgDef (ImportDef) Decl*

包定义
PkgDef = package ID (.ID)*

依赖导入(可选)
ImportDef = &#39;import&#39; STRING as ID; |&#39;{&#39; (STRING as ID; )* &#39;}&#39;
声明定义
Decl = ScopeDecl | VarDecl | FuncDecl | EnumDecl | StructDecl | UnionDecl | InterfaceDecl | ClassDecl | ~

表达式
Exp = BaseExp | DotExp | UnaryExp | BinaryExp | TernaryExp | NewExp | PriorityExp

基础表达式
BaseExp = IDExp | ConstExp | CallExp | ArrarExp | ThisExp | SuperExp
IDExp = ID
ConstExp = c
CallExp = ID &#39;(&#39; ArgList&#39;)&#39;
ArrarExp = ID &#39;[&#39; Exp &#39;]&#39;
ThisExp = &#39;this&#39;
SuperExp = &#39;super&#39;

成员访问表达式
DotExp = BaseExp ( &#39;.&#39; BaseExp)*

一元表达式
UnaryExp = UnaryOP BaseExp
UnaryOP = &#39;-&#39; | &#39;+&#39; | &#39;--&#39; | &#39;++&#39; | &#39;~&#39; | &#39;!&#39;
二元表达式
BinaryExp = Exp BinaryOP Exp
BinaryOP = &#39;+&#39; | &#39;-&#39; | &#39;*&#39; | &#39;/&#39; | &#39;%&#39; |
            &#39;&amp;&#39; | &#39;|&#39; | &#39;&amp;&amp;&#39; | &#39;||&#39; |
            &#39;&lt;&lt;&#39; | &#39;&gt;&gt;&#39; | &#39;&gt;&gt;&gt;&#39; |
            &#39;&lt;&#39; | &#39;&gt;&#39; | &#39;&lt;=&#39; | &#39;&gt;=&#39; |
            &#39;==&#39; | &#39;!=&#39; | &#39;=&#39; |
            
三元表达式
TernaryExp = Exp &#39;?&#39; Exp &#39;:&#39; Exp

括号表达式
PriorityExp = &#39;(&#39; Exp &#39;)&#39;</code></pre></div>
            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">语言定义 的子部分</h1>
          <article class="default">
            <header class="headline">
            </header>
<h1 id="代码文件结构">代码文件结构</h1>

<p>每一个文件都必须定义一个作用域名，其他内容在此作用域定义。</p>
<p>生成的声明符号都在该作用域内，只能通过该作用域才能访问代码文件中声明的符号内容。</p>
<h2 id="代码结构">代码结构</h2>
<h3 id="包声明">包声明</h3>
<pre><code>package pkg.pkg2;
</code></pre>
<h3 id="依赖单元">依赖单元</h3>
<pre><code>Import file=“dir/file.ext” as file ;
</code></pre>
<p>或者</p>
<pre><code>Import{

	 ile=“dir/file.ext” as file ;
	 ile2=“dir/file2.ext” as file2  ;
}
</code></pre>
<h3 id="枚举定义">枚举定义</h3>
<pre><code>enum name : int32{
    item=0,
    item2=23,
    …
}
</code></pre>
<h3 id="结构体定义">结构体定义</h3>
<pre><code>Struct name{
	Int32 i32;
	Union{
		Int32 s32;
		Flt32 f32;
    }
}
</code></pre>
<h3 id="联合体定义">联合体定义</h3>
<pre><code>Union name{
	Int32 s32;
	Flt32 f32;
	Struct{…}
}
</code></pre>
<h3 id="接口定义">接口定义</h3>
<pre><code>Interface IFather{
    void eat(int32 arg);
}
Interface IFather2{
    void say(int32 arg);
}
Interface IChild :[ IFather,IFather2 ]{
    void walk(int32 arg);
}
</code></pre>
<h3 id="类定义">类定义</h3>
<pre><code>Class Parent {
Private:
        Int32 mI32;
Public	Flt32 mF32;
Public:
    Void print(){}
Protected void toString(){}
    Virtual void vfun()=0;
}

Class child: Parent :[ IChild ]{
    void eat(int32 arg) @override{}
    void say(int32 arg) @override{}
    void walk(int32 arg) @override{}
    void vfun()@override{}
}</code></pre>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="关键字">关键字</h1>

<p>airlang 的关键字分为两种：普通关键字，宏关键字。
两者差别不大，但是宏关键字有特殊的标记作用，一般用于注解一些信息。</p>
<h2 id="宏关键字">宏关键字</h2>
<table>
<thead>
<tr>
<th>关键字</th>
<th>注解</th>
</tr>
</thead>
<tbody>
<tr>
<td>@file</td>
<td>代码中获取文件的名称字符串</td>
</tr>
<tr>
<td>@line</td>
<td>代码中获取代码所作行号数字</td>
</tr>
<tr>
<td>@func</td>
<td>代码中获取函数声明字符串</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>@debug</td>
<td>用于标记只在debug标志下启用的代码</td>
</tr>
<tr>
<td>@NotNulptr</td>
<td>用于标记需要检查函数的指针参数非空</td>
</tr>
<tr>
<td>@override</td>
<td>标记非静态成员函数是重写父类的函数</td>
</tr>
</tbody>
</table>
<h2 id="普通关键字">普通关键字</h2>
<table>
<thead>
<tr>
<th>固定位宽类型关键字</th>
<th>注解</th>
<th>位宽(bit)</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>空，一般用于表示无返回值</td>
<td>0</td>
</tr>
<tr>
<td>bool</td>
<td>布尔类型</td>
<td>8</td>
</tr>
<tr>
<td>flt32</td>
<td>32位单精度浮点</td>
<td>32</td>
</tr>
<tr>
<td>flt64</td>
<td>64位双精度浮点</td>
<td>32</td>
</tr>
<tr>
<td>int8</td>
<td>8位有符号整数</td>
<td>8</td>
</tr>
<tr>
<td>int16</td>
<td>8位有符号整数</td>
<td>16</td>
</tr>
<tr>
<td>int32</td>
<td>8位有符号整数</td>
<td>32</td>
</tr>
<tr>
<td>int64</td>
<td>8位有符号整数</td>
<td>64</td>
</tr>
<tr>
<td>uint8</td>
<td>8位无符号整数</td>
<td>8</td>
</tr>
<tr>
<td>uint16</td>
<td>16位无符号整数</td>
<td>16</td>
</tr>
<tr>
<td>uint32</td>
<td>32位无符号整数</td>
<td>32</td>
</tr>
<tr>
<td>uint64</td>
<td>64位无符号整数</td>
<td>64</td>
</tr>
<tr>
<td>char</td>
<td>字符</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>可变位宽类型的位宽由编译的目标CPU架构有关。</p>
<table>
    <th>可变位宽类型关键字</th><th>注解</th><th>CPU32</th><th>CPU64</th>
    <tr>
    <td>sint</td><td>有符号整数 </td><td>32</td><td>64</td>
    </tr>
    <tr>
    <td>uint</td><td>无符号整数 </td><td>32</td><td>64</td>
    </tr>
    <tr>
    <td>uintptr</td><td>指针 </td><td>32</td><td>64</td>
    </tr>
    <tr>
    <td>cstring</td><td>字符串指针 </td><td>32</td><td>64</td>
    </tr>
</table>
<table>
<thead>
<tr>
<th>修饰关键字</th>
<th>注解</th>
</tr>
</thead>
<tbody>
<tr>
<td>static</td>
<td>静态</td>
</tr>
<tr>
<td>public</td>
<td>完全公开的</td>
</tr>
<tr>
<td>protected</td>
<td>对部分成员公开的</td>
</tr>
<tr>
<td>private</td>
<td>私有的 成员</td>
</tr>
<tr>
<td>const</td>
<td>常量化，只读</td>
</tr>
<tr>
<td>friend</td>
<td>友元定义</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>分支关键字</th>
<th>注解</th>
</tr>
</thead>
<tbody>
<tr>
<td>if</td>
<td>比较分支</td>
</tr>
<tr>
<td>elsif</td>
<td>次比较分支</td>
</tr>
<tr>
<td>else</td>
<td>比较默认分支</td>
</tr>
<tr>
<td>for</td>
<td>循环</td>
</tr>
<tr>
<td>foreach</td>
<td>循环</td>
</tr>
<tr>
<td>while</td>
<td>循环</td>
</tr>
<tr>
<td>do</td>
<td>循环</td>
</tr>
<tr>
<td>break</td>
<td>跳出循环</td>
</tr>
<tr>
<td>continue</td>
<td>继续下一轮循环</td>
</tr>
<tr>
<td>goto</td>
<td>跳转到标签</td>
</tr>
<tr>
<td>return</td>
<td>函数返回</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>类型定义关键字</th>
<th>注解</th>
</tr>
</thead>
<tbody>
<tr>
<td>enum</td>
<td>枚举</td>
</tr>
<tr>
<td>struct</td>
<td>结构体</td>
</tr>
<tr>
<td>union</td>
<td>联合体</td>
</tr>
<tr>
<td>interface</td>
<td>接口</td>
</tr>
<tr>
<td>class</td>
<td>类</td>
</tr>
<tr>
<td>entrust</td>
<td>委托指针</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>其他关键字</th>
<th>注解</th>
</tr>
</thead>
<tbody>
<tr>
<td>false</td>
<td></td>
</tr>
<tr>
<td>true</td>
<td></td>
</tr>
<tr>
<td>nullptr</td>
<td></td>
</tr>
<tr>
<td>this</td>
<td></td>
</tr>
<tr>
<td>super</td>
<td></td>
</tr>
</tbody>
</table>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="操作符">操作符</h1>

<table>
<thead>
<tr>
<th>操作符</th>
<th>优先级</th>
<th>注解</th>
</tr>
</thead>
</table>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="类型系统">类型系统</h1>

<h2 id="基本类型">基本类型</h2>
<table>
<thead>
<tr>
<th>固定位宽类型</th>
<th>注解</th>
<th>位宽(bit)</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>空，一般用于表示无返回值</td>
<td>&mdash;</td>
</tr>
<tr>
<td>bool</td>
<td>布尔类型</td>
<td>8</td>
</tr>
<tr>
<td>flt32</td>
<td>32位单精度浮点</td>
<td>32</td>
</tr>
<tr>
<td>flt64</td>
<td>64位双精度浮点</td>
<td>32</td>
</tr>
<tr>
<td>int8</td>
<td>8位有符号整数</td>
<td>8</td>
</tr>
<tr>
<td>int16</td>
<td>8位有符号整数</td>
<td>16</td>
</tr>
<tr>
<td>int32</td>
<td>8位有符号整数</td>
<td>32</td>
</tr>
<tr>
<td>int64</td>
<td>8位有符号整数</td>
<td>64</td>
</tr>
<tr>
<td>uint8</td>
<td>8位无符号整数</td>
<td>8</td>
</tr>
<tr>
<td>uint16</td>
<td>16位无符号整数</td>
<td>16</td>
</tr>
<tr>
<td>uint32</td>
<td>32位无符号整数</td>
<td>32</td>
</tr>
<tr>
<td>uint64</td>
<td>64位无符号整数</td>
<td>64</td>
</tr>
<tr>
<td>char</td>
<td>字符</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>可变位宽类型的位宽由编译的目标CPU架构有关。</p>
<table>
    <th>可变位宽类型</th><th>注解</th><th>CPU32</th><th>CPU64</th>
    <tr>
    <td>sint</td><td>有符号整数 </td><td>32</td><td>64</td>
    </tr>
    <tr>
    <td>uint</td><td>无符号整数 </td><td>32</td><td>64</td>
    </tr>
    <tr>
    <td>uintptr</td><td>指针 </td><td>32</td><td>64</td>
    </tr>
    <tr>
    <td>cstring</td><td>字符串指针 </td><td>32</td><td>64</td>
    </tr>
</table>
<h2 id="枚举类型">枚举类型</h2>
<h2 id="结构体">结构体</h2>
<h2 id="联合体">联合体</h2>
<h2 id="接口">接口</h2>
<h2 id="类">类</h2>
<h2 id="函数指针">函数指针</h2>

            <footer class="footline">

            </footer>
          </article>

          </section>
          </section>
          <article class="default">
            <header class="headline">
            </header>
<h1 id="操作系统">操作系统</h1>

<h2 id="测试">测试</h2>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="文件格式">文件格式</h1>


<ul class="children children-li children-sort-weight">
	
<li><a href="./format/bmp/index.html">BMP 文件格式</a></li>
</ul>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">文件格式 的子部分</h1>
          <article class="default">
            <header class="headline">
<div class="tags">
  <a class="tag-link" href="./tags/bmp/index.html">BMP</a>
  <a class="tag-link" href="./tags/format/index.html">Format</a>
</div>
            </header>
<h1 id="bmp-文件格式">BMP 文件格式</h1>


            <footer class="footline">

            </footer>
          </article>

          </section>
          </section>
        </div>
      </main>
    </div>
    <script src="./js/clipboard.min.js?1694943322" defer></script>
    <script src="./js/perfect-scrollbar.min.js?1694943322" defer></script>
    <script src="./js/theme.js?1694943322" defer></script>
  </body>
</html>
